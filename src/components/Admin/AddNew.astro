---

---

 <section class="max-w-5xl mx-auto px-4 py-12 mt-12">
      <h1 class="text-3xl font-bold mb-8 text-center">ThÃªm tin tá»©c</h1>
      <form id="news-form" class="space-y-8 bg-white p-6 rounded-xl shadow border">
      <!-- TiÃªu Ä‘á» -->
    <div>
      <label class="block mb-1 font-semibold text-gray-700">ğŸ“ TiÃªu Ä‘á»</label>
      <input type="text" name="title" required class="w-full border border-gray-300 rounded px-4 py-2" />
    </div>

    <!-- TÃ¡c giáº£ -->
    <div>
      <label class="block mb-1 font-semibold text-gray-700">ğŸ‘¤ TÃ¡c giáº£</label>
      <input type="text" name="author" required class="w-full border border-gray-300 rounded px-4 py-2" />
    </div>

    <!-- Thanh cÃ´ng cá»¥ -->
    <div id="toolbar" class="flex flex-wrap gap-2 mb-4">
    <button type="button" onclick="execCmd('bold')" class="font-bold px-4 py-2 rounded-md bg-gray-100 text-gray-800 shadow-sm hover:bg-[var(--color-3)] hover:text-white transition duration-150">B</button>
    
    <button type="button" onclick="execCmd('italic')" class="italic px-4 py-2 rounded-md bg-gray-100 text-gray-800 font-medium shadow-sm hover:bg-[var(--color-3)] hover:text-white transition duration-150">I</button>
    
    <button type="button" onclick="execCmd('underline')" class="underline px-4 py-2 rounded-md bg-gray-100 text-gray-800 font-medium shadow-sm hover:bg-[var(--color-3)] hover:text-white transition duration-150">U</button>
    
    <button type="button" onclick="execCmd('insertImage')" class="px-4 py-2 rounded-md bg-gray-100 text-gray-800 font-medium shadow-sm hover:bg-[var(--color-3)] hover:text-white transition duration-150">ğŸ–¼</button>
    
    <button type="button" onclick="insertTable()" class="px-4 py-2 rounded-md bg-gray-100 text-gray-800 font-medium shadow-sm hover:bg-[var(--color-3)] hover:text-white transition duration-150">ğŸ“‹ Table</button>
    
    <button type="button" onclick="execCmd('createLink')" class="px-4 py-2 rounded-md bg-gray-100 text-gray-800 font-medium shadow-sm hover:bg-[var(--color-3)] hover:text-white transition duration-150">ğŸ”— Link</button>
    
    <button type="button" onclick="execCmd('removeFormat')" class="px-4 py-2 rounded-md bg-red-100 text-red-700 font-medium shadow-sm hover:bg-red-600 hover:text-white transition duration-150">âŒ Clear</button>
  </div>

    <!-- Ná»™i dung chÃ­nh -->
    <div>
      <label class="block mb-1 font-semibold text-gray-700">ğŸ“° Ná»™i dung</label>
      <!-- Editor hiá»ƒn thá»‹ -->
      <div id="editor" contenteditable="true" class="bg-white border border-gray-300 rounded px-4 py-2 h-96 overflow-y-auto"></div>
      <!-- TrÆ°á»ng áº©n Ä‘á»ƒ láº¥y HTML khi submit -->
      <input type="hidden" name="content" id="content" />
    </div>

    <!-- NÃºt submit -->
    <div class="text-right">
    <button type="submit" class="bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700">
        âœ… ThÃªm tin
    </button>
    </div>

    <p id="status" class="mt-4 text-sm text-green-600 font-semibold"></p>
      </form>
 </section>
<style>
  .btn {
    background-color: #e5e7eb;
    padding: 6px 10px;
    border-radius: 5px;
    font-weight: bold;
    cursor: pointer;
    transition: 0.2s;
  }
  .btn:hover {
    background-color: #d1d5db;
  }
</style>
<script>
  const form = document.getElementById("news-form") as HTMLFormElement;
  const contentInput = document.getElementById("content");
  const editor = document.getElementById("editor");

  form?.addEventListener("submit", async (e) => {
    e.preventDefault();

    (contentInput as HTMLTextAreaElement).value = editor?.innerHTML ?? "";

    const formData = new FormData(form);

    const res = await fetch("/api/add-news", {
      method: "POST",
      body: formData,
    });

    if (res.ok) {
      alert("âœ… ÄÃ£ thÃªm tin tá»©c!");
      window.location.href = "/admin/news"; // chuyá»ƒn vá» trang news
    } else {
      const error = await res.text();
      alert("âŒ Lá»—i khi thÃªm tin: " + error);
    }
  });

  // Toolbar há»— trá»£
  declare global {
  interface Window {
    execCmd: (command: string) => void;
    insertTable: (...args: any[]) => any;
  }
}
  window.execCmd = function (command) {
    if (command === 'insertImage') {
      const url = prompt("Nháº­p URL hÃ¬nh áº£nh:");
      if (url) document.execCommand('insertImage', false, url);
    } else if (command === 'createLink') {
      const url = prompt("Nháº­p URL liÃªn káº¿t:");
      if (url) document.execCommand('createLink', false, url);
    } else {
      document.execCommand(command, false, undefined);
    }
  };

  window.insertTable = function () {
  const rowsStr = prompt("Sá»‘ hÃ ng:", "2");
  const colsStr = prompt("Sá»‘ cá»™t:", "2");

  if (!rowsStr || !colsStr) return;

  const rows = parseInt(rowsStr, 10);
  const cols = parseInt(colsStr, 10);

  if (isNaN(rows) || isNaN(cols)) return;

  let table = `<table class="w-full border border-black border-collapse my-2">`;
  for (let i = 0; i < rows; i++) {
    table += "<tr>";
    for (let j = 0; j < cols; j++) {
      table += `<td class="border border-black p-2">&nbsp;</td>`;
    }
    table += "</tr>";
  }
  table += "</table><br/>";
  document.execCommand('insertHTML', false, table);
};
</script>
