---
const success = Astro.url.searchParams.get("success");
---

    <section class="max-w-5xl mx-auto px-4 py-12 mt-12">
      <h1 class="text-3xl font-bold mb-8 text-center">üß™ Th√™m S·∫£n Ph·∫©m H√≥a H·ªçc</h1>

      {success && <div class="text-green-600 text-center font-semibold mb-4">‚úÖ S·∫£n ph·∫©m ƒë√£ ƒë∆∞·ª£c l∆∞u!</div>}

      <form method="POST" action="/api/addproduct" id="product-form" class="space-y-8 bg-white p-6 rounded-xl shadow border">
        <!-- TH√îNG TIN CHUNG -->
        <div class="grid md:grid-cols-2 gap-6">
          <div>
            <label class="font-semibold block mb-1">T√™n h√≥a h·ªçc</label>
            <input name="name" type="text" required class="w-full border p-2 rounded" />
          </div>
          <div>
            <label class="font-semibold block mb-1">C√¥ng th·ª©c ph√¢n t·ª≠</label>
            <input name="formula" type="text" class="w-full border p-2 rounded" />
          </div>
          <div>
            <label class="font-semibold block mb-1">Kh·ªëi l∆∞·ª£ng ph√¢n t·ª≠</label>
            <input name="molarMass" type="text" class="w-full border p-2 rounded" />
          </div>
          <div>
            <label class="font-semibold block mb-1">S·ªë CAS</label>
            <input name="cas" type="text" class="w-full border p-2 rounded" />
          </div>
          <div>
            <label class="font-semibold block mb-1">S·ªë EINECS</label>
            <input name="einecs" type="text" class="w-full border p-2 rounded" />
          </div>
          <div>
            <label class="font-semibold block mb-1">M√£ H.S</label>
            <input name="hsCode" type="text" class="w-full border p-2 rounded" />
          </div>
        </div>

        <div>
          <label class="font-semibold block mb-1">H√¨nh th·ª©c</label>
          <textarea name="appearance" rows="3" class="w-full border p-2 rounded"></textarea>
        </div>
        <div>
          <label class="font-semibold block mb-1">·ª®ng d·ª•ng</label>
          <textarea name="application" rows="3" class="w-full border p-2 rounded"></textarea>
        </div>
        

        <div>
          <label class="font-semibold block mb-1">ƒê√≥ng g√≥i v√† b·∫£o qu·∫£n</label>
          <textarea name="storage" rows="3" class="w-full border p-2 rounded"></textarea>
        </div>

        <div class="grid md:grid-cols-2 gap-6">
          <div>
            <label class="font-semibold block mb-1">üîñ Lo·∫°i s·∫£n ph·∫©m (tags)</label>
            <input name="tags" type="text" placeholder="VD: h√≥a ch·∫•t, ph·ª• gia, c√¥ng nghi·ªáp" class="w-full border p-2 rounded" />
            <p class="text-sm text-gray-500 mt-1">C√°ch nhau b·∫±ng d·∫•u ph·∫©y.</p>
          </div>
          <div>
            <label class="font-semibold block mb-1">üñºÔ∏è ·∫¢nh ƒë·∫°i di·ªán (URL)</label>
            <input name="image" type="text" placeholder="https://..." class="w-full border p-2 rounded" />
          </div>
        </div>

        <!-- CH·ªà TI√äU K·ª∏ THU·∫¨T -->
        <div>
          <h2 class="text-xl font-bold mb-3">üìä Ch·ªâ ti√™u k·ªπ thu·∫≠t</h2>

          <div class="overflow-x-auto">
            <table class="min-w-full border border-gray-300 text-sm text-left">
              <thead class="bg-gray-100 text-gray-700 font-semibold">
                <tr>
                  <th class="border px-4 py-2">T√™n ch·ªâ ti√™u</th>
                  <th class="border px-4 py-2">Th·ª±c ph·∫©m</th>
                  <th class="border px-4 py-2">C√¥ng nghi·ªáp</th>
                  <th class="border px-4 py-2 w-12">Xo√°</th>
                </tr>
              </thead>
              <tbody id="spec-list">
                <tr class="spec-row">
                  <td class="border px-4 py-2">
                    <input type="text" name="spec-name" placeholder="VD: H√†m l∆∞·ª£ng" class="p-2 rounded w-full" />
                  </td>
                  <td class="border px-4 py-2">
                    <input type="text" name="spec-food" placeholder="VD: 94%" class="p-2 rounded w-full" />
                  </td>
                  <td class="border px-4 py-2">
                    <input type="text" name="spec-tech" placeholder="VD: 94%" class="p-2 rounded w-full" />
                  </td>
                  <td class="border px-4 py-2 text-center">
                    <button type="button" class="text-red-600 font-bold" onclick="this.closest('tr').remove()">‚úñ</button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>

          <button
            type="button"
            id="add-spec-row"
            class="mt-3 bg-gray-200 px-4 py-1 rounded hover:bg-gray-300"
          >
            ‚ûï Th√™m d√≤ng ch·ªâ ti√™u
          </button>
        </div>


        <div class="text-right">
            <button type="submit" class="bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700">
                ‚úÖ Th√™m s·∫£n ph·∫©m
            </button>
            </div>

      </form>
    </section>

    <script type="module">
  const specList = document.getElementById("spec-list");
  const addSpecBtn = document.getElementById("add-spec-row");

  addSpecBtn.addEventListener("click", () => {
    const row = document.createElement("tr");
    row.className = "spec-row";
    row.innerHTML = `
      <td class="border px-4 py-2">
        <input type="text" name="spec-name" placeholder="VD: H√†m l∆∞·ª£ng" class="p-2 rounded w-full" />
      </td>
      <td class="border px-4 py-2">
        <input type="text" name="spec-food" placeholder="VD: 94%" class="p-2 rounded w-full" />
      </td>
      <td class="border px-4 py-2">
        <input type="text" name="spec-tech" placeholder="VD: 94%" class="p-2 rounded w-full" />
      </td>
      <td class="border px-4 py-2 text-center">
        <button type="button" class="text-red-600 font-bold" onclick="this.closest('tr').remove()">‚úñ</button>
      </td>
    `;
    specList.appendChild(row);
  });
</script>


