<section class="bg-white text-[var(--color-3)] py-12">
  <div id="new-detail" class="max-w-7xl mx-auto px-4 flex flex-col lg:flex-row gap-12 mt-[5%]">

  </div>
</section>
<script>
import news from "../../data/news.json";

  const newDetail = document.getElementById('new-detail');
  const urlParams = new URLSearchParams(window.location.search);
  const id = parseInt(urlParams.get("id"));
  const newItem = news.find(p => p.id === id);

  if (!newItem) {
    newDetail.innerHTML = `<p class="text-red-500 text-xl font-semibold">Kh√¥ng t√¨m th·∫•y tin t·ª©c.</p>`;
  } else {
  newDetail.innerHTML = `
  <div class="w-full space-y-8">
    <!-- Ti√™u ƒë·ªÅ -->
    <h1 class="text-4xl font-extrabold text-center text-[var(--color-1)]">
      ${newItem.title}
    </h1>

    <!-- M√¥ t·∫£ -->
      <div class="p-6 rounded-lg text-gray-700 leading-relaxed text-center">
        <div class="text-lg inline-block text-left max-w-3xl w-full">
          ${newItem.content}
        </div>
      </div>

    <!-- H√†nh ƒë·ªông -->
    <div class="flex flex-wrap justify-end gap-4 pt-8 border-t mt-12">
      <a href="/admin/editnew?id=${newItem.id}" class="bg-yellow-500 hover:bg-yellow-600 text-white px-6 py-2 rounded-lg font-semibold shadow transition">
        ‚úèÔ∏è S·ª≠a
      </a>
      <button id="delete-btn" class="bg-red-500 hover:bg-red-600 text-white px-6 py-2 rounded-lg font-semibold shadow transition">
        üóëÔ∏è X√≥a
      </button>
      <a href="/admin/news" class="bg-gray-700 hover:bg-gray-800 text-white px-6 py-2 rounded-lg font-semibold shadow transition">
        ‚Üê Quay v·ªÅ danh s√°ch
      </a>
    </div>
  </div>
`;
  document.getElementById("delete-btn")?.addEventListener("click", async () => {
  if (!confirm("B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a tin t·ª©c n√†y?")) return;

  try {
    const res = await fetch("/api/delete-news", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ id }),
    });

    if (!res.ok) {
      const text = await res.text();
      alert("L·ªói server: " + text);
      return;
    }

    const result = await res.json();
    alert("ƒê√£ x√≥a tin t·ª©c.");
    window.location.href = "/admin/news";
  } catch (error) {
    alert("L·ªói k·∫øt n·ªëi m√°y ch·ªß.");
    console.error(error);
  }
});
}
</script>
