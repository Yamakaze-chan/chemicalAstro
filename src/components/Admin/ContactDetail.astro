---
---

<section class="bg-white text-[var(--color-3)] py-12">
  <div id="contact-detail" class="max-w-7xl mx-auto px-4 flex flex-col lg:flex-row gap-12 mt-[5%]">

  </div>
</section>

<script>
  window.addEventListener("DOMContentLoaded", async () => {
    const contactDetail = document.getElementById("contact-detail");

    if (!contactDetail) {
      console.warn("KhÃ´ng tÃ¬m tháº¥y pháº§n tá»­ #contact-detail.");
      return;
    }

    const urlParams = new URLSearchParams(window.location.search);
    const idParam = urlParams.get("id");

    if (!idParam || isNaN(parseInt(idParam))) {
      contactDetail.innerHTML = `<p class="text-red-500 text-xl font-semibold">ID khÃ´ng há»£p lá»‡ hoáº·c khÃ´ng Ä‘Æ°á»£c cung cáº¥p.</p>`;
      return;
    }

    const id = parseInt(idParam);

    let contactList = [];
    try {
      const res = await fetch("/api/contact");
      if (!res.ok) throw new Error("Lá»—i khi gá»i API");

      contactList = await res.json();
    } catch (err) {
      console.error("Lá»—i táº£i dá»¯ liá»‡u liÃªn há»‡:", err);
      contactDetail.innerHTML = `<p class="text-red-500 text-xl font-semibold">Lá»—i khi táº£i dá»¯ liá»‡u liÃªn há»‡.</p>`;
      return;
    }

    const contactItem = contactList.find((c) => c.id === id);

    const businessTypeMap = {
      retail: "CÃ¡ nhÃ¢n",
      service: "Doanh nghiá»‡p",
      other: "KhÃ¡c",
    };

    const businessCategoryMap = {
      retail: "BÃ¡n láº»",
      service: "Dá»‹ch vá»¥",
      manufacturing: "Sáº£n xuáº¥t",
      other: "KhÃ¡c",
    };

    if (!contactItem) {
      contactDetail.innerHTML = `<p class="text-red-500 text-xl font-semibold">KhÃ´ng tÃ¬m tháº¥y liÃªn há»‡ cá»§a khÃ¡ch hÃ ng.</p>`;
    } else {
      contactDetail.innerHTML = `
        <div class="bg-white rounded-2xl shadow-xl p-8 w-full max-w-3xl mx-auto">
          <h1 class="text-4xl font-bold text-blue-700 mb-8 border-b pb-4 flex items-center gap-2">
              Chi tiáº¿t liÃªn há»‡
          </h1>

          <div class="space-y-4 text-lg text-gray-700">
              <p><strong class="text-gray-900">ğŸ“… Thá»i gian:</strong> ${new Date(contactItem.createdAt).toLocaleString("vi-VN")}</p>
              <p><strong class="text-gray-900">ğŸ‘¤ Há» tÃªn:</strong> ${contactItem.nameCustomer}</p>
              <p><strong class="text-gray-900">ğŸ“§ Email:</strong> ${contactItem.email}</p>
              <p><strong class="text-gray-900">ğŸ“ Sá»‘ Ä‘iá»‡n thoáº¡i:</strong> ${contactItem.phone}</p>
              <p><strong class="text-gray-900">ğŸ¢ Loáº¡i hÃ¬nh kinh doanh:</strong> ${businessTypeMap[contactItem.businessType] || "KhÃ´ng xÃ¡c Ä‘á»‹nh"}</p>
              <p><strong class="text-gray-900">ğŸ“¦ NgÃ nh hÃ ng:</strong> ${businessCategoryMap[contactItem.businessCategory] || "KhÃ´ng xÃ¡c Ä‘á»‹nh"}</p>
              <p><strong class="text-gray-900">ğŸ“ Tin nháº¯n:</strong> ${contactItem.messageCustomer || "KhÃ´ng cÃ³"}</p>
          </div>
        </div>
      `;
    }
  });
</script>

