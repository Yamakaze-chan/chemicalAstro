---
---

<section class="bg-white text-[var(--color-3)] py-12">
  <div id="contact-detail" class="max-w-7xl mx-auto px-4 flex flex-col lg:flex-row gap-12 mt-[5%]">

  </div>
</section>

<script>
  import contact from "../../data/contact.json";

  window.addEventListener("DOMContentLoaded", () => {
    const contactdetail = document.getElementById("contact-detail");

    if (!contactdetail) {
      console.warn("KhÃ´ng tÃ¬m tháº¥y pháº§n tá»­ #contact-detail.");
      return;
    }

    const urlParams = new URLSearchParams(window.location.search);
    const idParam = urlParams.get("id");

    if (!idParam || isNaN(parseInt(idParam))) {
      contactdetail.innerHTML = `<p class="text-red-500 text-xl font-semibold">ID khÃ´ng há»£p lá»‡ hoáº·c khÃ´ng Ä‘Æ°á»£c cung cáº¥p.</p>`;
      return;
    }

    const id = parseInt(idParam);
    const contactItem = contact.find(c => c.id === id);

    type BusinessType = "retail" | "service" | "other";

    const businessTypeMap: Record<BusinessType, string> = {
      retail: "CÃ¡ nhÃ¢n",
      service: "Doanh nghiá»‡p",
      other: "KhÃ¡c",
    };

    function getBusinessTypeLabel(type: string): string {
      if (type in businessTypeMap) {
        return businessTypeMap[type as BusinessType];
      }
      return "KhÃ´ng xÃ¡c Ä‘á»‹nh";
    }

    const businessCategoryMap = {
      retail: "BÃ¡n láº»",
      service: "Dá»‹ch vá»¥",
      manufacturing: "Sáº£n xuáº¥t",
      other: "KhÃ¡c",
    };

    type BusinessCategory = keyof typeof businessCategoryMap;
    

    function getBusinessCategoryLabel(category: any): string {
      if (category in businessCategoryMap) {
        return businessCategoryMap[category as BusinessCategory];
      }
      return "KhÃ´ng xÃ¡c Ä‘á»‹nh";
    }

    if (!contactItem) {
      contactdetail.innerHTML = `<p class="text-red-500 text-xl font-semibold">KhÃ´ng tÃ¬m tháº¥y liÃªn há»‡ cá»§a khÃ¡ch hÃ ng.</p>`;
    } else {
      contactdetail.innerHTML = `
        <div class="bg-white rounded-2xl shadow-xl p-8 w-full max-w-3xl mx-auto">
          <h1 class="text-4xl font-bold text-[var(--color-3)] mb-8 border-b pb-4 flex items-center gap-2">
              Chi tiáº¿t liÃªn há»‡
          </h1>

          <div class="space-y-4 text-lg text-gray-700">
            <p><strong class="text-gray-900">ğŸ“… Thá»i gian:</strong> ${new Date(contactItem.createdAt).toLocaleString("vi-VN")}</p>
            <p><strong class="text-gray-900">ğŸ‘¤ Há» tÃªn:</strong> ${contactItem.nameCustomer}</p>
            <p><strong class="text-gray-900">ğŸ“§ Email:</strong> ${contactItem.email}</p>
            <p><strong class="text-gray-900">ğŸ“ Sá»‘ Ä‘iá»‡n thoáº¡i:</strong> ${contactItem.phone}</p>
            <p><strong class="text-gray-900">ğŸ¢ Loáº¡i hÃ¬nh kinh doanh:</strong> ${getBusinessTypeLabel(contactItem.businessType)}</p>
            <p><strong class="text-gray-900">ğŸ“¦ LÄ©nh Vá»±c:</strong> ${getBusinessCategoryLabel(contactItem.businessCategory)}</p>
            <p><strong class="text-gray-900">ğŸ“ Tin nháº¯n:</strong> ${contactItem.messageCustomer}</p>
        </div>
        </div>
      `;
    }
  });
</script>
